<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>üß∏ Catch My Hugs ‚Äî For Mim</title>
  <style>
    :root{
      --bg1:#0b1020; --bg2:#161a2b; --card:rgba(255,255,255,.08);
      --txt:#eef1ff; --mut:#b8c0ff; --accent:#ff5b8a;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0; min-height:100vh; color:var(--txt);
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background:
        radial-gradient(900px 480px at 18% 0%, #2a3566 0%, transparent 58%),
        radial-gradient(900px 520px at 82% 20%, #6b2d52 0%, transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      display:flex; align-items:center; justify-content:center; padding:16px;
    }
    .wrap{
      width:min(860px, 100%);
      background: linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.05));
      border:1px solid rgba(255,255,255,.12);
      border-radius:22px;
      box-shadow: 0 18px 70px rgba(0,0,0,.55);
      overflow:hidden;
    }
    header{
      padding:14px 16px 10px;
      display:flex; gap:12px; align-items:center; justify-content:space-between;
      flex-wrap:wrap;
    }
    .title{ display:flex; flex-direction:column; gap:4px; }
    h1{ margin:0; font-size:18px; letter-spacing:.2px; }
    .sub{ margin:0; color:var(--mut); font-size:13px; line-height:1.4; }
    .pill{
      background: rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.14);
      padding:8px 10px; border-radius:999px;
      font-weight:700; font-size:13px;
      display:flex; gap:8px; align-items:center;
    }
    .bar{
      display:flex; gap:10px; align-items:center; padding:0 16px 12px;
      flex-wrap:wrap;
    }
    .btn{
      appearance:none; border:none; cursor:pointer;
      padding:10px 12px; border-radius:14px; font-weight:800;
      background: rgba(255,255,255,.10);
      border:1px solid rgba(255,255,255,.14);
      color:var(--txt);
    }
    .btn:active{ transform: scale(.99); }
    .btn.primary{
      background: linear-gradient(135deg, var(--accent), #ffbe4f);
      color:#1a1020; border:none;
    }
    .hint{ color:var(--mut); font-size:13px; }
    .gameArea{
      position:relative;
      background: rgba(0,0,0,.18);
      border-top:1px solid rgba(255,255,255,.10);
    }
    canvas{ display:block; width:100%; height:60vh; max-height:560px; }
    .overlayMsg{
      position:absolute; inset:0;
      display:flex; align-items:center; justify-content:center;
      pointer-events:none;
      font-weight:900; font-size:22px;
      text-shadow: 0 10px 30px rgba(0,0,0,.65);
      opacity:0; transform: translateY(6px);
      transition: opacity .18s ease, transform .18s ease;
      padding:18px; text-align:center;
    }
    .overlayMsg.show{ opacity:1; transform: translateY(0); }
    footer{
      padding:12px 16px 16px;
      color:var(--mut); font-size:13px; line-height:1.5;
    }
    .strong{ color:var(--txt); font-weight:800; }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="title">
        <h1>üß∏ Catch My Hugs, Mim</h1>
        <p class="sub">Move the basket. Catch teddies to collect hugs. Made with code by <span class="strong">Turjo</span>.</p>
      </div>
      <div class="pill">‚ù§Ô∏è Hugs: <span id="score">0</span></div>
    </header>

    <div class="bar">
      <button class="btn primary" id="startBtn">Start</button>
      <button class="btn" id="resetBtn">Reset</button>
      <span class="hint">Tip: On phone, drag your finger left/right.</span>
    </div>

    <div class="gameArea">
      <div class="overlayMsg" id="msg"></div>
      <canvas id="c"></canvas>
    </div>

    <footer>
      When you miss me, play this for 30 seconds and count the hugs.  
      If you reach <span class="strong">20 hugs</span>‚Ä¶ open WhatsApp and tell me: ‚ÄúI caught them all.‚Äù üß∏‚ù§Ô∏è
    </footer>
  </div>

  <script>
    const canvas = document.getElementById("c");
    const ctx = canvas.getContext("2d");

    function resize(){
      const rect = canvas.getBoundingClientRect();
      const dpr = Math.max(1, window.devicePixelRatio || 1);
      canvas.width = Math.floor(rect.width * dpr);
      canvas.height = Math.floor(rect.height * dpr);
      ctx.setTransform(dpr,0,0,dpr,0,0);
    }
    window.addEventListener("resize", resize);

    const scoreEl = document.getElementById("score");
    const msgEl = document.getElementById("msg");
    const startBtn = document.getElementById("startBtn");
    const resetBtn = document.getElementById("resetBtn");

    let running = false;
    const basket = { x: 0, y: 0, w: 110, h: 26 };

    let teddies = [];
    let score = 0;
    let lastSpawn = 0;
    let spawnEvery = 850;
    let lastTime = 0;

    function showMsg(text){
      msgEl.textContent = text;
      msgEl.classList.add("show");
      clearTimeout(showMsg._t);
      showMsg._t = setTimeout(()=> msgEl.classList.remove("show"), 700);
    }

    function resetGame(){
      teddies = [];
      score = 0;
      scoreEl.textContent = score;
      running = false;
      startBtn.textContent = "Start";
      showMsg("Ready when you are üß∏");
      draw();
    }

    function addScore(){
      score++;
      scoreEl.textContent = score;

      if(score === 10) showMsg("10 hugs delivered ü§ó");
      else if(score === 20) showMsg("20 hugs! Message me: ‚ÄúI caught them all.‚Äù ‚ù§Ô∏è");
      else {
        const lines = ["Hug sent ü§ó","Delivered üß∏","Miss you ‚ù§Ô∏è","Another hug"];
        showMsg(lines[Math.floor(Math.random()*lines.length)]);
      }
    }

    function spawnTeddy(){
      const w = canvas.getBoundingClientRect().width;
      teddies.push({
        x: Math.random() * (w - 30),
        y: -40,
        vy: 2.2 + Math.random()*2.2
      });
    }

    function update(now){
      if(!running) return;

      if(now - lastSpawn > spawnEvery){
        spawnTeddy();
        lastSpawn = now;
        if(spawnEvery > 520) spawnEvery -= 5;
      }

      const h = canvas.getBoundingClientRect().height;

      for(let i = teddies.length - 1; i >= 0; i--){
        const t = teddies[i];
        t.y += t.vy;

        const inX = (t.x + 12) > basket.x && (t.x + 12) < (basket.x + basket.w);
        const inY = (t.y + 18) > basket.y && (t.y + 18) < (basket.y + basket.h);
        if(inX && inY){
          teddies.splice(i,1);
          addScore();
          continue;
        }

        if(t.y > h + 50){
          teddies.splice(i,1);
          showMsg("You missed my hug ü•∫");
        }
      }
    }

    function draw(){
      const w = canvas.getBoundingClientRect().width;
      const h = canvas.getBoundingClientRect().height;

      ctx.clearRect(0,0,w,h);

      ctx.globalAlpha = 0.22;
      for(let i=0;i<40;i++){
        const x = (i*97)%w;
        const y = (i*53)%h;
        ctx.fillRect(x, y, 2, 2);
      }
      ctx.globalAlpha = 1;

      basket.y = h - 52;

      ctx.fillStyle = "rgba(255,91,138,.95)";
      ctx.fillRect(basket.x, basket.y, basket.w, basket.h);
      ctx.fillStyle = "rgba(255,255,255,.18)";
      ctx.fillRect(basket.x, basket.y, basket.w, 6);

      ctx.font = "28px system-ui, Apple Color Emoji, Segoe UI Emoji";
      for(const t of teddies){
        ctx.fillText("üß∏", t.x, t.y);
      }

      if(!running){
        ctx.font = "16px system-ui";
        ctx.fillStyle = "rgba(255,255,255,.75)";
        ctx.textAlign = "center";
        ctx.fillText("Tap Start, then catch teddies to collect hugs ‚ù§Ô∏è", w/2, h/2);
        ctx.textAlign = "left";
      }
    }

    function loop(now){
      if(!lastTime) lastTime = now;
      update(now);
      draw();
      requestAnimationFrame(loop);
    }

    function setBasketX(clientX){
      const rect = canvas.getBoundingClientRect();
      const x = clientX - rect.left;
      basket.x = Math.max(8, Math.min(rect.width - basket.w - 8, x - basket.w/2));
    }

    canvas.addEventListener("mousemove", (e)=> setBasketX(e.clientX));
    canvas.addEventListener("touchstart", (e)=> { e.preventDefault(); setBasketX(e.touches[0].clientX); }, {passive:false});
    canvas.addEventListener("touchmove", (e)=> { e.preventDefault(); setBasketX(e.touches[0].clientX); }, {passive:false});

    startBtn.addEventListener("click", ()=>{
      running = !running;
      startBtn.textContent = running ? "Pause" : "Start";
      showMsg(running ? "Go! Catch the hugs ü§ó" : "Paused üß∏");
    });

    resetBtn.addEventListener("click", ()=>{
      spawnEvery = 850;
      lastSpawn = 0;
      resetGame();
    });

    resize();
    resetGame();
    requestAnimationFrame(loop);
  </script>
</body>
</html>
